[build]
dockerfile = "Dockerfile"

[deploy]
startCommand = "mkdir -p /home/node/.openclaw && node -e \"const fs=require('fs'),p='/home/node/.openclaw/openclaw.json';let c={};try{c=JSON.parse(fs.readFileSync(p,'utf8'));}catch(e){}; c.gateway=c.gateway||{};c.gateway.controlUi=c.gateway.controlUi||{};c.gateway.controlUi.dangerouslyAllowHostHeaderOriginFallback=true;fs.writeFileSync(p,JSON.stringify(c,null,2));console.log('config patched');\" && node openclaw.mjs gateway --bind lan --port 8080 --allow-unconfigured"
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3
